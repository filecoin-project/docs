(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{362:function(s,a,t){s.exports=t.p+"assets/img/mining_pool.f0b5913c.jpg"},363:function(s,a,t){s.exports=t.p+"assets/img/api_config.3e051c72.png"},404:function(s,a,t){"use strict";t.r(a);var e=t(25),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"how-to-deploy-distributed-mining-pool"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-deploy-distributed-mining-pool"}},[s._v("#")]),s._v(" How to Deploy Distributed mining pool")]),s._v(" "),e("p",[s._v("分布式矿池系统包含venus， venus-miner, venus-wallet, venus-messager, venus-sealer五个组件，五个组件分为两类，第一类是可共享的组件包括venus，venus-miner, venus-wallet, venus-messager这几个组件。运行在矿工本地主要用于积累算力的组件包括venus-sealer，venus-worker，venus-wallet。 venus-wallet属于可选组件，基于部署情况以及可信程度，venus-wallet既可以共享也可以本地部署。 本篇文档会以nerpda网络为例逐步的搭建矿池以及如何加入这个矿池。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(362),alt:"./images/mining_pool.jpg"}})]),s._v(" "),e("h2",{attrs:{id:"共享组件搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#共享组件搭建"}},[s._v("#")]),s._v(" 共享组件搭建")]),s._v(" "),e("h3",{attrs:{id:"auth-组件搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#auth-组件搭建"}},[s._v("#")]),s._v(" auth 组件搭建")]),s._v(" "),e("p",[s._v("auth用于统一授权，当矿工组件访问共享组件的时候需要配置先获取token")]),s._v(" "),e("p",[s._v("编译授权组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/ipfs-force-community/venus-auth.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),e("p",[s._v("运行授权组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v(" ./auth-server\n")])])]),e("p",[s._v("auth服务启动后，默认监听端口8989，此处auth服务的地址称为 "),e("em",[e("strong",[s._v("auth url")])])]),s._v(" "),e("p",[s._v("获取组件间访问token,此处称为 "),e("em",[e("strong",[s._v("admin token")])])]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v(" ./auth-server genToken --perm admin admin\n")])])]),e("h3",{attrs:{id:"venus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus"}},[s._v("#")]),s._v(" venus")]),s._v(" "),e("p",[s._v("venus节点组件用于其他组件查询链上信息，推送消息，区块。")]),s._v(" "),e("p",[s._v("编译节点组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/filecoin-project/venus.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" deps\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),e("p",[s._v("运行节点，同步数据")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus daemon --network nerpda --authURL "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auth url"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),e("p",[s._v("修改配置文件，打开外部端口")]),s._v(" "),e("p",[e("img",{attrs:{src:t(363),alt:"./images/api_config.png"}})]),s._v(" "),e("p",[s._v("获取api地址, 此处成为***venus api***")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.venus/api      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此处如何ip是127.0.0.1需要修改配置文件的api监听地址，如果是0.0.0.0使用的时候需要改用具体的地址")]),s._v("\n")])])]),e("p",[s._v("为了避免单节点故障,venus最好配置负载均衡:"),e("strong",[e("RouterLink",{attrs:{to:"/zh/venus_load_balancing.html"}},[s._v("venus_load_balancing")])],1)]),s._v(" "),e("h3",{attrs:{id:"venus-miner"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-miner"}},[s._v("#")]),s._v(" venus-miner")]),s._v(" "),e("p",[s._v("venus-miner组件用于出块打包消息，可以配置多个矿工，本程序会计算各自的出块机会，并通过远程请求sealer来获取数据证明。")]),s._v(" "),e("p",[s._v("编译miner组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/filecoin-project/venus-miner.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" nerpanet\n")])])]),e("p",[s._v("运行miner组件, 首先需要写入访问节点的api及其token")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ~/.venus\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("venus api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ~/.lotus/api       "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#api从节点中获取")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("admin token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ~/.lotus/token   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#token从节点中获取")]),s._v("\n")])])]),e("p",[s._v("运行挖矿软件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TRUST_PARAMS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" ./venus-miner init\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TRUST_PARAMS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" ./venus-miner run\n")])])]),e("h3",{attrs:{id:"venus-messager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-messager"}},[s._v("#")]),s._v(" venus-messager")]),s._v(" "),e("p",[s._v("messager用户管理集群中所有的消息，保证消息上链，控制消息的流量，重试等。messager对接多个钱包，扫描其地址，监控这些地址所属交易的状态，接收这些地址发送的消息服务")]),s._v(" "),e("p",[s._v("编译messager组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/ipfs-force-community/venus-messager.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" deps\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),e("p",[s._v("运行messager组件，编辑messager.toml配置文件，修改node下的url和token， 配置成节点中获取的地址和token")]),s._v(" "),e("div",{staticClass:"language-toml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-toml"}},[e("code",[s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("address")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("remoteWalletSweepInterval")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Address")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0:39812"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("db")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("type")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sqlite"')]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("db.mysql")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("db.sqlite")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("path")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./message.db"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("debug")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("jwt")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" <auth url>\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("path")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"messager.log"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("messageService")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("skipProcessHead")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("skipPushMessage")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("tipsetFilePath")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./tipset.json"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("messageState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("CleanupInterval")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("DefaultExpiration")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("259200")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("backTime")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("node")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("url")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" <venus api>   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改此处")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("token")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" <admin token> "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改此处")]),s._v("\n")])])]),e("p",[s._v("执行命令")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-messager -c ./messager.toml\n")])])]),e("p",[s._v("启动服务后，默认监听端口39812， messager的服务地址成为***messager url***")]),s._v(" "),e("h2",{attrs:{id:"配置矿工启动本地组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置矿工启动本地组件"}},[s._v("#")]),s._v(" 配置矿工启动本地组件")]),s._v(" "),e("p",[s._v("本地组件用于本地封装算力。sealer部分是必选的，wallet部分则属于可选的，可以几个sealer集群共享一个wallet，也可以每个sealer单独配备一个wallet。可以根据实际需求来处理。")]),s._v(" "),e("h3",{attrs:{id:"获取本地token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取本地token"}},[s._v("#")]),s._v(" 获取本地token")]),s._v(" "),e("p",[s._v("为了访问公共组件需要向公共组件提交矿工信息（此处用名字testminer为例子），生成一个访问公共组件所需的token，此处称为 "),e("em",[e("strong",[s._v("local token")])])]),s._v(" "),e("p",[s._v("公共组件维护人员在auth组件上运行命令")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v(" ./auth-server genToken --perm "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" testminer\n")])])]),e("h3",{attrs:{id:"venus-wallet"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-wallet"}},[s._v("#")]),s._v(" venus-wallet")]),s._v(" "),e("p",[s._v("钱包用于保管私钥，对外提供签名服务，以及签名策略。")]),s._v(" "),e("p",[s._v("编译钱包组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/ipfs-force-community/venus-wallet.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),e("p",[s._v("运行钱包组件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-wallet run\n")])])]),e("p",[s._v("设置钱包密码")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-wallet set-password\n")])])]),e("p",[s._v("创建新地址")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-wallet new bls\n")])])]),e("p",[s._v("获取钱包授权token及地址，此处成为***local wallet token***, "),e("em",[e("strong",[s._v("local wallet api")])])]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-wallet auth api-info --perm sign\n")])])]),e("h3",{attrs:{id:"创建地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建地址"}},[s._v("#")]),s._v(" 创建地址")]),s._v(" "),e("p",[s._v("在钱包上创建一个地址")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-wallet new bls\n")])])]),e("p",[s._v("从水龙头领取一笔资金***https://faucet.nerpa.interplanetary.dev/funds.html***")]),s._v(" "),e("h3",{attrs:{id:"编译sealer组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编译sealer组件"}},[s._v("#")]),s._v(" 编译sealer组件")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git clone https://github.com/filecoin-project/venus-sealer.git\nmake deps\nmake\n")])])]),e("h3",{attrs:{id:"初始化sealer矿工"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化sealer矿工"}},[s._v("#")]),s._v(" 初始化sealer矿工")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#不存在矿工")]),s._v("\n./venus-sealer init --worker "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("worker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --owner "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("owner"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sector-size 512M --network nerpa --node-url "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("venus api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --node-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --messager-url "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("messager url"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --messager-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-name testminer\n\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#初始化已存在矿工")]),s._v("\n./venus-sealer init --actor "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("actor"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  --network nerpa --node-url "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("venus api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --node-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --messager-url "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("messager url"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --messager-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local \n")])])]),e("h3",{attrs:{id:"运行矿工"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行矿工"}},[s._v("#")]),s._v(" 运行矿工")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-sealer run\n./venus-sealer sectors pledge "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#封装算力")]),s._v("\n")])])]),e("p",[s._v("获取sealer的token及地址，此处成为***sealer token***, "),e("em",[e("strong",[s._v("sealer api")])])]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.venussealer/api  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此处如何ip是127.0.0.1需要修改配置文件的api监听地址，如果是0.0.0.0使用的时候需要改用具体的地址")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.venussealer/token\n")])])]),e("h2",{attrs:{id:"共享组件上操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#共享组件上操作"}},[s._v("#")]),s._v(" 共享组件上操作")]),s._v(" "),e("h3",{attrs:{id:"注册钱包到messager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注册钱包到messager"}},[s._v("#")]),s._v(" 注册钱包到messager")]),s._v(" "),e("p",[s._v("在messager上运行命令")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-messager wallet "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --name testminer --url  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local wallet api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local wallet token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),e("p",[s._v("此命令运行后，messager会扫描钱包的地址，并对这些地址的消息进行控制管理。")]),s._v(" "),e("h3",{attrs:{id:"加入联合挖矿"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加入联合挖矿"}},[s._v("#")]),s._v(" 加入联合挖矿")]),s._v(" "),e("p",[s._v("矿工初始化完成后，需要把这个矿工加入到venus-miner里面,在venus-miner机器上执行如下指令。此处需要访问sealer获取数据证明，需要访问wallet获取签名能力。")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("./venus-miner address "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --addr "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("actor"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sealer-listen-api "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("sealer api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sealer-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("sealer token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-listen-api "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local wallet api"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-token "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local wallet token"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);