(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{381:function(a,s,e){"use strict";e.r(s);var t=e(25),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"how-to-use-venus-messager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-venus-messager"}},[a._v("#")]),a._v(" How to use venus messager")]),a._v(" "),e("p",[a._v("messager is a component used to manage local messages, with the purpose of saving address messages, managing message status, and controlling the frequency of push messages.")]),a._v(" "),e("p",[a._v("[TOC]")]),a._v(" "),e("h2",{attrs:{id:"getting-start"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getting-start"}},[a._v("#")]),a._v(" Getting start")]),a._v(" "),e("h4",{attrs:{id:"clone-this-git-repository-to-your-machine"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clone-this-git-repository-to-your-machine"}},[a._v("#")]),a._v(" Clone this git repository to your machine")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git clone git@github.com:ipfs-force-community/venus-messager.git\n")])])]),e("h4",{attrs:{id:"install-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-dependencies"}},[a._v("#")]),a._v(" Install Dependencies")]),a._v(" "),e("ol",[e("li",[a._v("First, load all the Git submodules.")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git submodule update --init --recursive\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("Initialize build dependencies.")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("make deps\n")])])]),e("h4",{attrs:{id:"build-and-run-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#build-and-run-tests"}},[a._v("#")]),a._v(" Build and run tests")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# First, build the binary\nmake\n\n# Then, run the tests.\nmake test\n")])])]),e("h4",{attrs:{id:"start-messager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-messager"}},[a._v("#")]),a._v(" Start messager")]),a._v(" "),e("ol",[e("li",[a._v("Modify config.toml")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[node]\n  # If the connection is a venus node, the url is in ~/.venus/api\n  url = "/ip4/127.0.0.1/tcp/3453"\n  # If the connection is a venus node, the token is in ~/.venus/token\n  token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJhbGwiXX0.S5ucwvhFM6tkuLInwZi0VSBEl1T570oLVfp47KBWcXo"\n')])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("run messager")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# default -c=messager.toml\n./venus-messager -c=path to messager.toml\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("Set global config, when the messager is running")])]),a._v(" "),e("p",[e("strong",[a._v("If push message arrives at the messager that the expireEpoch or gasOverEstimation or maxFee or maxFeeCap is not set, the global value is used")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('# expireEpoch is the expiration height of the message, 0 means it will not expire\n# selMsgNum is the maximum number of messages pushed to mpool by a single address at a time\n# scanInterval is the interval to scan the remote wallet\n# maxEstFailNumOfMsg is the number of failures allowed to estimate gas consumption\n./venus-messager share-params set "{\\"expireEpoch\\": 0, \\"gasOverEstimation\\": 0, \\"maxFee\\": 100000, \\"maxFeeCap\\": 20000, \\"selMsgNum\\": 12, \\"scanInterval\\": 8, \\"maxEstFailNumOfMsg\\": 5}"\n')])])]),e("ol",{attrs:{start:"4"}},[e("li",[a._v("If you want to connect to a remote wallet, use this command")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# there will be a few seconds delay in getting the wallet address\n./venus-messager wallet add --name=<wallet name> --url=<remote wallet url> --token=<remote wallet token>\n")])])]),e("h2",{attrs:{id:"commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[a._v("#")]),a._v(" Commands")]),a._v(" "),e("h3",{attrs:{id:"message-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#message-commands"}},[a._v("#")]),a._v(" Message commands")]),a._v(" "),e("ol",[e("li",[a._v("search message")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg search --id=<message_id>\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("list all message")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg list\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("manual update one filled message state")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg update_filled_msg --id=<message_id>\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[a._v("manual update all filled message state")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg update_all_filled_msg\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[a._v("wait a messager msg id for result")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg wait <message_id>\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[a._v("republish a message by id")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg republish <message_id>\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[a._v("replace a message")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager msg replace --gas-feecap=[gas-feecap] --gas-premium=[gas-premium] --gas-limit=[gas-limit] --auto=[auto] --max-fee=[max-fee] <message-id>\n# or\n./venus-messager msg replace --gas-feecap=[gas-feecap] --gas-premium=[gas-premium] --gas-limit=[gas-limit] --auto=[auto] --max-fee=[max-fee] <from> <nonce>\n")])])]),e("h3",{attrs:{id:"address-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#address-commands"}},[a._v("#")]),a._v(" Address commands")]),a._v(" "),e("ol",[e("li",[a._v("search address")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address search <address>\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("list address")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address list\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("update address nonce")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address update_nonce --nonce=5 <address>\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[a._v("forbidden address")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address forbidden <address>\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[a._v("activate a frozen address")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address active <address>\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[a._v("set the number of address selection messages")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager address set_sel_msg_num --num=5 <address>\n")])])]),e("h3",{attrs:{id:"wallet-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wallet-commands"}},[a._v("#")]),a._v(" Wallet commands")]),a._v(" "),e("ol",[e("li",[a._v("search wallet by name")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager wallet search <wallet-name>\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("add wallet")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager wallet add --name=<wallet-name> --url=<wallet-url> --token=<wallet-token>\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("list wallet")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager wallet list\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[a._v("list remote wallet address")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager wallet list-addr --uuid=<wallet-id>\n# or\n./venus-messager wallet list-addr --name=<wallet-name>\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[a._v("delete wallet by name")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager wallet del <name>\n")])])]),e("h3",{attrs:{id:"shared-params-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shared-params-commands"}},[a._v("#")]),a._v(" shared params commands")]),a._v(" "),e("ol",[e("li",[a._v("get shared params")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager share-params get\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("set shared params")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('./venus-messager share-params set "{\\"expireEpoch\\": 0, \\"gasOverEstimation\\": 0, \\"maxFee\\": 100000, \\"maxFeeCap\\": 20000, \\"selMsgNum\\": 12, \\"scanInterval\\": 8, \\"maxEstFailNumOfMsg\\": 5}"\n')])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("manual refresh shared params from DB")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager share-params refresh\n")])])]),e("h3",{attrs:{id:"node-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node-commands"}},[a._v("#")]),a._v(" node commands")]),a._v(" "),e("ol",[e("li",[a._v("search node info by name")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager node search <name>\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("add node info")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager node add --name=<node-name> --url=<node-url> --token=<node-token>\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("list node info")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager node list\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[a._v("del node info by name")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("./venus-messager node del <name>\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);